using Gamba.Ast;
using Gamba.Interop;
using Gamba.Parsing;
using Gamba.Simplification;
using Gamba.Utility;
using System.Data;
using System.Diagnostics;
using System.Text.RegularExpressions;

// Remove white space from the MBA string and parse it.
var input = "2351193725*(~aux0^~x^y&x)+1596312586*((~aux1^aux0&x)&(aux0|y)&(aux0^aux1))+2290851828*~(aux1^x|~aux0)+2886596537*(x&x)+1943773571*aux0+2151036226*((~x^x^aux0)&((y|aux0)^aux0))+531942972*~(aux1&(aux1|y))+3835581895*~(x&aux1&aux0)+2342434347*(~aux0|aux1|~(aux0^x))+1275471292*~(y^~x)+2076673039*(aux0&aux1&~aux0|aux1&aux1|x)+1952150221*(x&aux0)+875156293*~y+1544730067*~(aux0|aux1|aux0^aux0)+1743616072*(y&((aux0|aux0)^~aux1))+3487232144*(y&aux0&(aux1|y)&~aux1)+2551351224*~(aux1&(y|y))+3887547142*(~(aux0&y)|~~x)+3687798283*((~y|x)^y^x^x)+2218294257*~(aux1&x)";
input = "((((((((((((a & 255)  | (d ^ -1) )  | ((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) ) )  + 1)  + (((((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) )  ^ -1)  & d)  & (a & 255) ) )  + ((((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) )  | d)  & ((a & 255)  ^ -1) ) )  + ((a & 255)  & ((((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) )  | d)  ^ -1) ) )  * 1099511628211)  ^ -1)  & (e ^ -1) )  | ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  & ((((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216)  & ( (((((((((((a & 255)  | (d ^ -1) )  | ((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) ) )  + 1)  + (((((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) )  ^ -1)  & d)  & (a & 255) ) )  + ((((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) )  | d)  & ((a & 255)  ^ -1) ) )  + ((a & 255)  & ((((((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  | c)  * -3298534884633)  + -2199023256422)  + ((((((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) )  + -2199023256422)  ^ (c ^ -1) )  * 2199023256422) )  + ((((2199023256421 - (((((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  * -7696581397477)  + ((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & (b ^ -1) )  * 1099511628211) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  & b)  ^ -1)  * -5497558141055) )  + (((((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  | b)  + (((((2 * (2063597568 & (-16777216 ^ ((-1073741823 + a)  + (4278190080 | (a ^ -1) ) ) ) ) )  - ((((( (a & 4294967295))  & -16777216)  + -1073741824)  ^ -16777216) ) )  * 1099511628211)  + -5808590958014384161)  ^ (b ^ -1) ) )  * 3298534884633) ) )  & c)  - (c ^ -1) )  * 1099511628211) )  | d)  ^ -1) ) )  * 1099511628211)  ^ -1)  & (e ^ -1) )  & 4294967295)) ) )  ^ -1) ) ";
input = StringUtility.RemoveWhitespace(input);

Console.WriteLine(input);
var ast = AstParser.Parse(input, 32);

// Convert the parsed AST back into a string representation, then dump it for comparison.
var parsed = AstFormatter.FormatAst(ast);
parsed = StringUtility.RemoveWhitespace(parsed);
for(int i = 0; i < 5; i++)
    Console.WriteLine("");

Console.WriteLine(parsed);

var sw = Stopwatch.StartNew();
var classification = AstClassifier.Classify(ast);
sw.Stop();
Console.WriteLine($"Took {sw.ElapsedMilliseconds}");

foreach (var (node, linearity) in classification)
{
    var isLinear = AstClassifier.IsLinear(linearity);
    if(isLinear)
        Console.WriteLine($"(class: {linearity}) (isLinear: {isLinear}): {node}");
}

Debugger.Break();